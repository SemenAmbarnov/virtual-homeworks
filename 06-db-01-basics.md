# Домашнее задание к занятию "6.1. Типы и структура СУБД"


### Задача №1 

Архитектор ПО решил проконсультироваться у вас, какой тип БД лучше выбрать для хранения определенных данных.

Он вам предоставил следующие типы сущностей, которые нужно будет хранить в БД:

* Электронные чеки в json виде
* Склады и автомобильные дороги для логистической компании
* Генеалогические деревья
* Кэш идентификаторов клиентов с ограниченным временем жизни для движка аутенфикации
* Отношения клиент-покупка для интернет-магазина

Выберите подходящие типы СУБД для каждой сущности и объясните свой выбор.

Решение: 

* Документо-орентированный NoSQL - осуществляется хранение данных как документов
* Графовые БД - возможность построения маршрутов в виде графов
* Иерархическая БД - древовидная структура по схеме родитель-потомок
* База данных ключ-значение - поддерживается настройки ограниченного времени жизни
* Реляционные БД - обеспечивается связь между таблицами(пример из лекции)


### Задача №2

Вы создали распределенное высоконагруженное приложение и хотите классифицировать его согласно CAP-теореме. Какой классификации по CAP-теореме соответствует ваша система, если (каждый пункт - это отдельная реализация вашей системы и для каждого пункта надо привести классификацию):

* Данные записываются на все узлы с задержкой до часа (асинхронная запись)
* При сетевых сбоях, система может разделиться на 2 раздельных кластера
* Система может не прислать корректный ответ или сбросить соединение


Решение:

* AP
* AP
* PC

А согласно PACELC-теореме, как бы вы классифицировали данные реализации?

* PA/EC
* PA/EL
* PC/EC

### Задача №3

Могут ли в одной системе сочетаться принципы BASE и ACID? Почему?

Решение:

* Не могут, так как основные принципы работы противорячат друг другу. BASE - доступность в любой ситуации в ущерб согласованности. ASID - на первом месте стоит согласованность и точность данных всех элементов кластера.

### Задача №4

Вам дали задачу написать системное решение, основой которого бы послужили:

фиксация некоторых значений с временем жизни
реакция на истечение таймаута
Вы слышали о key-value хранилище, которое имеет механизм Pub/Sub. Что это за система? Какие минусы выбора данной системы?

Решение:

Судя по описанию задачи речь идёт о БД Redis.

Минусы:

* Не имеет механизма консенсуса. При отказе ведущей реплики-необходимо вручную выбирать новую
* Нужно внимательно следить за переполнением кэша, и периодически его очищать.
* Данные в момент работы хранятся в оперативной памяти, поэтому максимальный ее объем зависит от объема последней.
* Проблемма в согласованности одновременной записи в кэш БД
* Сложность в поддержке самой базы данных
* Доступ к БД по общему паролю(минус безопасность)
